<h1>üéÆ D√©mo Interactive : SignalStore en Action</h1>

<div class="slide-container">
  <p class="subtitle">Une seule ligne de code par action, tout le reste est automatique !</p>

  @if (!showDemo()) {
    <div class="console-prompt">
      <h2>üìä Observez les logs Signal Store !</h2>
      <p>Avant de lancer la d√©mo, ouvrez la <strong>Console de votre navigateur</strong> (F12) pour observer les logs.</p>
      <p>Vous verrez uniquement les appels ‚ö° Signal Store s'afficher de mani√®re propre et lisible...</p>
      <p-button
        label="Ma console est ouverte, lancer la d√©mo !"
        icon="pi pi-play"
        severity="success"
        (onClick)="openDemo()" />
    </div>
  }

  @if (showDemo()) {
  <div class="demo-grid">
    <!-- Store Selection -->
    <div class="selection-card">
      <h3>1. üè™ Choisissez un Magasin</h3>
      <p-select
        [options]="stores()"
        [(ngModel)]="selectedStoreId"
        (onChange)="onStoreChange($event.value)"
        optionLabel="name"
        optionValue="id"
        [loading]="storesLoading()"
        placeholder="S√©lectionner un magasin"
        [style]="{'width': '100%'}"
      />
      @if (selectedStore()) {
        <div class="selection-info">
          <strong>{{ selectedStore()!.name }}</strong>
          <p>{{ selectedStore()!.city }}, {{ selectedStore()!.country }}</p>
        </div>
      }
    </div>

    <!-- Client Selection -->
    <div class="selection-card" [class.disabled]="!selectedStoreId()">
      <h3>2. üë§ Choisissez un Client</h3>
      <p-select
        [options]="clients()"
        [(ngModel)]="selectedClientId"
        (onChange)="onClientChange($event.value)"
        optionLabel="name"
        optionValue="id"
        [loading]="clientsLoading()"
        [disabled]="!selectedStoreId()"
        placeholder="S√©lectionner un client"
        [style]="{'width': '100%'}"
      />
      @if (selectedClient()) {
        <div class="selection-info">
          <strong>{{ selectedClient()!.name }}</strong>
          <p>{{ selectedClient()!.email }}</p>
        </div>
      }
    </div>

    <!-- Cart Selection -->
    <div class="selection-card" [class.disabled]="!selectedClientId()">
      <h3>3. üõí Choisissez un Panier</h3>
      <p-select
        [options]="carts()"
        [(ngModel)]="selectedCartId"
        (onChange)="onCartChange($event.value)"
        optionLabel="date"
        optionValue="id"
        [loading]="cartsLoading()"
        [disabled]="!selectedClientId()"
        placeholder="S√©lectionner un panier"
        [style]="{'width': '100%'}"
      />
      @if (selectedCart()) {
        <div class="selection-info">
          <strong>Panier du {{ selectedCart()!.date }}</strong>
          <p>Total: {{ selectedCart()!.total | currency:'EUR' }}</p>
        </div>
      }
    </div>

    <!-- Products List -->
    <div class="products-card" [class.disabled]="!selectedCartId()">
      <h3>4. üì¶ Produits dans le Panier</h3>
      @if (productsLoading()) {
        <div class="loading-state">Chargement des produits...</div>
      } @else if (products().length > 0) {
        <div class="products-list">
          @for (product of products(); track product.id) {
            <div class="product-item">
              <div class="product-details">
                <strong>{{ product.name }}</strong>
                <span class="product-category">{{ product.category }}</span>
              </div>
              <div class="product-price">
                <span class="quantity">x{{ product.quantity }}</span>
                <strong>{{ product.price * product.quantity | currency:'EUR' }}</strong>
              </div>
            </div>
          }
        </div>
        <div class="products-total">
          <strong>Total:</strong>
          <strong class="total-amount">{{ productsTotal() | currency:'EUR' }}</strong>
        </div>
      } @else if (selectedCartId()) {
        <div class="empty-state">Aucun produit dans ce panier</div>
      } @else {
        <div class="empty-state">S√©lectionnez un panier pour voir les produits</div>
      }
    </div>
  </div>

  <div class="code-hint">
    üí° Tout ceci fonctionne avec <strong>6 fichiers</strong> (4 stores + component) : seulement 387 lignes de code !
  </div>
  }
</div>
